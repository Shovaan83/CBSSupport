@{
    Layout = null;

    if (Context.User.Identity?.IsAuthenticated != true)
    {
        <div class="alert alert-danger">Not Authenticated!</div>
    }
    else
    {
        <div class="alert alert-success">
            Autenticated as: @Context.User.Identity.Name
            Claims: @string.Join(", ", Context.User.Claims.Select(c => $"{c.Type}: {c.Value}"))
        </div>
    }
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Support Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="~/css/chat.css" asp-append-version="true" />
</head>
<body>
    <!--Nav Bar-->
    <header class="app-header">
        <div class="header-left">
            <img src="~/images/infobrain-logo.jpg" alt="Balance Logo" class="header-logo" />
            <button class="btn btn-icon"><i class="fas fa-bars"></i></button>
            <div class="header-brand-text">INFOBRAIN TECHNOLOGIES PVT LTD (HEAD OFFICE.)</div>
        </div>
        <div class="header-right">
            <div class="user-info">
                <div>Transaction Running Date: @DateTime.Now</div>
                <div>Logged Branch: 01 (HEAD OFFICE.) | Hello, @ViewBag.UserFullName</div>
            </div>
            <div class="header-actions">
                <button class="btn btn-icon" id="fullscreen-btn" title="Toggle Fullscreen"><i class="fas fa-expand"></i></button>
                <button class="btn btn-icon position-relative" data-bs-toggle="modal" data-bs-target="#notificationsModal" title="Notifications">
                    <i class="fas fa-bell"></i>
                </button>
                <button class="btn btn-icon" data-bs-toggle="modal" data-bs-target="#userModal" title="User Actions">
                    <i class="fas fa-users"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="main-content-grid">

        <!-- Column 1: Conversation List -->
        <div class="content-panel conversation-list">
            <div class="conversation-list-header">
                <input type="search" class="form-control" placeholder="Search...">
            </div>
            <div class="conversation-list-body">
                <div class="conversation-item active">
                    <img src="https://i.pravatar.cc/150?img=1" class="rounded-circle conversation-avatar">
                    <div>
                        <div class="fw-bold">Marie Horwitz</div>
                        <div class="small text-muted">Hello, Are you there?</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Column 2: Chat Panel -->
        <div class="content-panel chat-panel" id="chat-panel-container">
            <p>Select a conversation.</p>
        </div>

        <!-- Column 3: History Panels -->
        <div class="history-column">
            <div class="history-panel">
                <div class="panel-header">My Support Tickets</div>
                <div class="history-table-container">
                    <table class="table table-hover table-sm small">
                        <thead><tr><th>ID</th><th>Subject</th><th>Date</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>#84321</td><td>Login Issue</td><td>2024-10-21</td><td><span class="badge bg-success">Resolved</span></td></tr>
                            <tr><td>#84199</td><td>Invoice Question</td><td>2024-10-19</td><td><span class="badge bg-success">Resolved</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="history-panel">
                <div class="panel-header">My Inquiries</div>
                <div class="history-table-container">
                    <table class="table table-hover table-sm small">
                        <thead><tr><th>ID</th><th>Topic</th><th>Date</th><th>Outcome</th></tr></thead>
                        <tbody>
                            <tr><td>#INQ-345</td><td>Pricing for Enterprise Plan</td><td>2024-09-05</td><td><span class="badge bg-info">Info Sent</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </main>

    <!-- Notification Modal-->
    <div class="modal fade" id="notificationsModal" tabindex="-1" aria-labelledby="notificationsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="notificationsModalLabel">Notifications</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Placeholder Content -->
                    <div class="list-group">
                        <a href="#" class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-1">New message from John</h6>
                                <small>3 mins ago</small>
                            </div>
                            <p class="mb-1">Hey, can you look at ticket #84512?</p>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-1">System Maintenance</h6>
                                <small class="text-muted">Yesterday</small>
                            </div>
                            <p class="mb-1">Scheduled maintenance will occur tonight at 11 PM.</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User/Logout Modal -->
    <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalLabel">User Actions</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="d-grid">
                        <a class="btn btn-danger" href="/Login/Logout">
                            <i class="fas fa-sign-out-alt me-2"></i>Logout
                        </a>
                    </div>
                </div>
            </div>
        </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/signalr/dist/browser/signalr.min.js"></script>
    <script src="~/js/chat.js" asp-append-version="true"></script>
</body>
</html>